<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>「转」基于 Readeck 搭建个人稍后读/书签服务 | 一塘</title>
<link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/css/dark.css></head><body><nav><ul class=menu><li><a href=/about/>一塘</a></li><li><a href=/post/>博客</a></li><li><a href=/categories/>分类</a></li><li><a href=/tags/>标签</a></li><li style=float:right;position:relative;margin-left:1em><input type=text id=search-box placeholder=搜索文章... style="padding:.3em .6em;border-radius:4px;border:1px solid #ccc;width:150px;min-width:100px;max-width:250px"><ul id=search-results style="position:absolute;top:100%;right:0;background:#fff;border:1px solid #ccc;max-height:300px;overflow-y:auto;display:none;z-index:1000;list-style:none;padding:0;margin:0;width:250px"></ul></li><style>.search-item{padding:.4em .6em}.search-link{display:block;font-weight:500;text-decoration:none;color:#007acc}.search-snippet{font-size:.85em;color:#555;margin-top:.2em;line-height:1.4}.search-highlight{background:rgba(255,235,59,.5);padding:0 .15em;border-radius:3px}.search-item:hover{background-color:rgba(0,0,0,5%)}@media(prefers-color-scheme:dark){.search-link{color:#4fc3f7}.search-snippet{color:#aaa}.search-item:hover{background-color:rgba(104,99,99,.273)}.search-highlight{background:rgba(255,193,7,.35)}}</style><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.6.2/fuse.min.js></script><script>fetch("/post/index.json").then(e=>e.json()).then(e=>{const o=new Fuse(e,{keys:[{name:"title",weight:2},{name:"summary",weight:1},{name:"content",weight:.7}],threshold:.3,ignoreLocation:!0,minMatchCharLength:2}),n=document.getElementById("search-box"),t=document.getElementById("search-results");function s(e,t){if(!e)return"";const n=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${n})`,"gi");return e.replace(s,'<mark class="search-highlight">$1</mark>')}function i(e,t,n=80){const s=e.toLowerCase().indexOf(t.toLowerCase());if(s===-1)return e.slice(0,n)+"…";const o=Math.max(0,s-n/2),i=Math.min(e.length,s+n/2);return"…"+e.slice(o,i)+"…"}n.addEventListener("input",function(){const e=this.value.trim();if(!e){t.style.display="none",t.innerHTML="";return}const n=o.search(e);t.innerHTML=n.slice(0,8).map(t=>{const n=t.item,o=i(n.content||n.summary||"",e);return`
          <li class="search-item">
            <a href="${n.permalink}" class="search-link">
              ${s(n.title,e)}
            </a>
            <div class="search-snippet">
              ${s(o,e)}
            </div>
          </li>
        `}).join(""),t.style.display=n.length?"block":"none"}),document.addEventListener("click",e=>{!n.contains(e.target)&&!t.contains(e.target)&&(t.style.display="none")})})</script></ul><hr></nav><div class=article-meta><h1><span class=title>「转」基于 Readeck 搭建个人稍后读/书签服务</span></h1></div><div class=post-stats style=text-align:right>2024/06/06</div><main><h2 id=前言>前言</h2><blockquote><p>本文由 <a href=http://ksria.com/simpread/>简悦 SimpRead</a> 转码， 原文地址 <a href=https://sspai.com/post/89289>https://sspai.com/post/89289</a></p></blockquote><hr><p>作为喜欢阅读互联网长文的「上世代互联网遗老」，我一直保持着一个和现在互联网快消时代格格不入的爱好：偏爱长内容，这包括了我喜欢观看哪些具有丰富知识内容的长视频，收听播客节目以及阅读长篇的文章。尤其是长篇文章，往往是在我在碎片化的时间浏览公众号或者 RSS 订阅时，然后就会把这篇长文发到我的稍后读应用或者推送到我的 Kindle 邮箱中，等晚上做到书桌前仔细深度阅读。</p><p>因此我一直都非常留意各家的稍后读 / 书签服务，从最早的 instapaper、Pocket 到后来使用 Kindle 的邮箱推送等都有尝试，只不过在国内这个互联网环境中难免会遇到网络访问稳定性的问题——毕竟这几种稍后读服务都来自国外开发商，经常会遇到发送微信公众号文章后重排版出错的情况，就更别提数据保留的安全性问题了。</p><p>既然我已经在家中部署了 NAS，秉承「将数据保留在自己手上」的宗旨，我决定将稍后读 / 书签服务也进行自部署。而考虑到我实际的使用情况，我自部署的稍后读 / 书签服务需要满足以下几点：</p><ul><li>支持自部署，且部署方式容易。</li><li>可以在手机端 / 桌面端进行进行阅读。</li><li>可以在不同的平台将文章 / 网页发送到稍后读服务中。</li><li>解析处理网页内容的速度要很快。</li></ul><p>而满足以上要求的就剩下了这款名为 Readeck 稍后读 / 书签服务。</p><h3 id=安装-readeck-服务端><strong>安装 Readeck 服务端</strong></h3><p>和其他自部署的服务一样，作为一款自部署优先服务，Readeck 官方直接就提供了 Docker 的部署方式，当然考虑到我自己家中的 NAS 是群晖的 DS218+，官方 Docker 套件本身功能比较弱，因此我还额外使用 Portainer 这个可视化的容器部署工具来进行部署，这样做的另一个好处就是，即便你的 NAS 不是群晖，只要支持容器，也可以采用类似的办法做部署。</p><p>我这里依旧以群晖为参照，首先打开群晖的 File Station 中的 docker 目录，在目录下创建一个新文件夹并将其命名为 readeck（全部是小写字母）。</p><p><div style=text-align:center><img src=069e4eb7887479dbd9965fe66592d07f_MD5.png alt></div></p><p>然后在新创建的这个<code>readeck</code> 文件夹里面，在分别创建<code>data</code>以及<code>db</code>两个文件夹。这两个文件夹后面用来存储服务中所产生的数据。</p><p><div style=text-align:center><img src=ba30f253cffcfa148f50a3034285873c_MD5.png alt></div></p><p>接下来我们就打开 Portainer 来进行服务容器的部署，这里打开并登录 Portainer，然后从左侧边栏中点击 Stacks，然后点击页面右上角的 <code>Add Stack</code>来添加。</p><p><div style=text-align:center><img src=198e1876734d030f3fbee692a6448489_MD5.png alt></div></p><p>在新创建的 Stack 的 Name 里面填写<code>readeck</code>，然后在 <code>Build method</code> 这里选择 <code>Web editor</code>，接着在下面内容直接复制到编辑器中：</p><pre tabindex=0><code>version: &#34;3.9&#34;
services:
  readeck:
    container_name: Readeck
    image: codeberg.org/readeck/readeck:latest
    mem_limit: 8g
    cpu_shares: 1024
    security_opt:
      - no-new-privileges:true
    restart: on-failure:5
    ports:
      - 4522:8000
    volumes:
      - /volume1/docker/readeck/data:/readeck:rw
    environment:
     READECK_USE_X_FORWARDED: true
     READECK_DATABASE_SOURCE: postgres://readeck:readeckpass@readeck-db:5432/readeck

  readeck-db:
    image: postgres:16
    container_name: Readeck-DB
    hostname: readeck-db
    mem_limit: 1g
    cpu_shares: 768
    security_opt:
      - no-new-privileges:true
    healthcheck:
      test: [&#34;CMD&#34;, &#34;pg_isready&#34;, &#34;-q&#34;, &#34;-d&#34;, &#34;readeck&#34;, &#34;-U&#34;, &#34;readeck&#34;]
      timeout: 45s
      interval: 10s
      retries: 10
    volumes:
      - /volume1/docker/readeck/db:/var/lib/postgresql/data:rw
    environment:
      POSTGRES_DB: readeck
      POSTGRES_USER: readeck
      POSTGRES_PASSWORD: readeckpass
    restart: on-failure:5
</code></pre><p>按照上面填写完成后，这里点击下方的「Deploy the stack」来部署容器，然后等待出现容器列表就表示部署成功了。</p><p><div style=text-align:center><img src=13c27281c23448eab38b2cc96aacea96_MD5.png alt></div></p><p>P.S：有关 docker 文件存储路径也需要留意，如果你的 NAS 有多个卷，最好能够核对自己创建文件夹的绝对路径，从而避免出错。</p><h3 id=配置-readeck><strong>配置 Readeck</strong></h3><p>当容器正式启动后，这时打开浏览器并访问：<a href=http://xn--%20nas%20-f38nz10erfap511b:4522/>http:// 你的 NAS 地址: 4522</a> ，如果可以访问到 Readeck 的登录页面就表示完全部署成功了，如果你和我一样，是部署到本地的 NAS 中的，那么如果想要从外网访问还需要通过 ddns 或者内网穿透的方式将服务暴露到公网中，这里我就不过多赘述了。</p><p><div style=text-align:center><img src=e6cb9148492f9f94149f728afb42b7ff_MD5.png alt></div></p><p>在注册页面中首先输入你未来需要登录 Readeck 的账号和密码，最后点击 Finish installation 来完成最后的注册。登录后你就可以看到 readeck 的列表页面，这就表示你已经成功完成了全部的安装工作。而既然是一款稍后读应用，那么自然少不了就是测试一下他的阅读模式的处理能力，这里我直接在 Readeck 上点击上方添加地址处贴上少数派的某篇文章的链接，然后点击「Save Link」来保存链接。</p><p><div style=text-align:center><img src=ba440664c4221d1ee8eaf9caba541825_MD5.png alt></div></p><p>这个保存并处理的过程非常快，稍等片刻 Readeck 就会完成处理并添加好作者以及标题，甚至还会自动生成稍后读文章卡片的封面图，而点击进去后可以看出会将一些无用的元素都进行清理，保留成适合手机进行阅读的「阅读模式」的效果。同时你还可以对阅读的效果进行设置，比如选择字体、字号以及对行高进行设置。</p><p><div style=text-align:center><img src=5cf3c2a8f1ba0e44759680460da2a914_MD5.png alt></div></p><p>同时你还可以对不同的文章打上特定的标签，方便的进行进一步的分类归档操作，而在晚间阅读时如果你觉得背景比较刺眼，也可以点击侧栏中的更换主题来切换成暗色模式。</p><p><div style=text-align:center><img src=7b598ffff6038799fe320d6b036086d3_MD5.png alt></div></p><h2 id=readeck-进阶用法用更简单的方式发送文章><strong>Readeck 进阶用法：用更简单的方式发送文章</strong></h2><p>Readeck 服务部署完毕并且进行了基础设置，那么接下来我们发送需要稍后读的文章 / 网页了，毕竟如果每一次添加稍后读的文章链接都需要打开 readeck 并点击「Save Link」显然非常繁琐，事实上 Readeck 提供了和很多商业服务类似的方式，可以让我们非常方便的将看到的文章发送到 Readeck 中。</p><h3 id=使用浏览器的扩展程序发送文章--链接><strong>使用浏览器的扩展程序发送文章 / 链接</strong></h3><p>如果你使用的是桌面浏览器来浏览网页内容，那么最为简单的办法就是通过浏览器的扩展程序，Readeck 提供了 Chrome/Firefox 两个主流浏览器的扩展程序，这里只需要在相应的扩展程度市场中下载安装，然后点击扩展程序后输入你的账户名、密码以及服务的具体地址，然后点击 Login 就可以完成登录绑定操作。</p><p><div style=text-align:center><img src=2ccf9ca5d95392d0d7053f99574a3d81_MD5.png alt></div></p><p>登录完成后，当你需要将正在浏览的网页发送到 Readeck 时，就只需要点击扩展程序栏中的 Readeck 图标，然后等待其完成保存即可。如果不放心你还可以登录 Readeck 中，看看你点击发送的这篇文章是否已经被收藏进来了。</p><p><div style=text-align:center><img src=ca212604670c46ae89b179ee19b53520_MD5.png alt></div></p><h3 id=在-ios-上使用快捷指令来收藏文章><strong>在 iOS 上使用快捷指令来收藏文章</strong></h3><p>我习惯在手机端浏览器网页，会将合适的内容也会将其发送到稍后读中，这同样在 Readeck 中也可以这样操作，只不过由于 Readeck 并没有提供手机客户端，因此这里需要自己通过第三方工具来实现，至于 iOS 上则是通过快捷指令来进行操作。</p><p><div style=text-align:center><img src=6d552777ed9aaa63eb258b201c2699df_MD5.png alt></div></p><p>不过在使用快捷指令操作之前，我们首选需要为这些操作来创建新的 API 密钥，这里先登录你的 Readeck 服务，然后点击 Profile - API Token，然后点击「Create a new API token」来创建一个新的 API Token，这里只需要将生成的「Your API token」下面的字符串保留下来备用即可。</p><p><div style=text-align:center><img src=3bd8fe6458d8a54600be10afe8b7f9db_MD5.png alt></div></p><p>接下来，使用 iOS 上的浏览器打开<a href=https://shareshortcuts.com/shortcuts/2696-send-page-to-readeck.html>这个地址</a>，然后点击「Download Shortcut」保存到你的快捷指令集中，接下来点击「Send Page To Readeck」这个快捷指令卡片的编辑按钮，在第一个注释下方的文本框中填写 Readeck 的公网访问地址，在第二个注释下方的文本框中，把刚才保存的 API Token 复制进去，然后点击右上角的完成来保存。</p><p><div style=text-align:center><img src=bbbada009b8d48517360004739871628_MD5.png alt></div></p><p>那么如何发文章到 Readeck 呢？当你使用 Safari 浏览器访问网址时，点击下方的分享按钮并在分享菜单中选择 Send Page To Readeck，然后等待快捷指令跑完即可，这时候你再访问 Readeck 就会发现刚才在 Safari 浏览的网页已经被发送到 Readeck 中了。</p><p><div style=text-align:center><img src=94b84e6d0b806059820a4cb6546b387b_MD5.png alt></div></p><h3 id=在-android-上使用-http-request-shortcuts-来收藏文章><strong>在 Android 上使用 HTTP Request Shortcuts 来收藏文章</strong></h3><p>相比于 iOS 上有系统级别的快捷指令，Android 上一直以来都没有系统级别的「脚本工具」，因此要想实现类似的操作将网页添加到 Readeck 就只能依赖第三方工具了，这里我们就需要用到这个 HTTP Request Shortcuts 这款应用来编写一个添加文章的脚本。</p><p><div style=text-align:center><img src=a1576aad9658c87d5eea815a9f2ace92_MD5.png alt></div></p><p>首先还是打开 HTTP Request Shortcuts，首先点击右上角的汉堡菜单，点击「变量」来创建三个变量：</p><ul><li>第一个变量叫做<code>readeck_shared_url</code>，变量类型为「输入文本」，需要注意的是这个变量的高级设置里面需要勾选「允许分享」，要从分享获得的数据为「仅文本」。</li><li>第二个变量叫做<code>readeck_url</code>，变量类型是「常量」，这里需要填写值，这个值就是你部署的 Readeck 服务的公网地址。</li><li>第三个变量叫做<code>readeck_token</code>，变量类型是「常量」，这里也需要填写值，这个值就是前面我们从 readeck 的 API Token 中保存下来的 Token 值。</li></ul><p><div style=text-align:center><img src=920f5a1045a7590d8dab8867c9f77d5b_MD5.png alt></div></p><p>紧接着，点击主页右下角的 <code>+</code>然后选择「从头创建」来创建一个新的快捷方式，这里名称你可以随便命名，可以像我一样将其命名为「Add To Readeck」，然后在基本设置中，选择方法为<code>Post</code>，url 这里输入值<code>{readeck_url}/api/bookmarks</code>。</p><p>在请求体 / 请求参数这里，这里设置返回体类型是<code>参数（x-www-form-urlencoded）</code>，下方的参数为<code>url</code>，值是<code>{readeck_shared_url}</code>。</p><p>在认证这里，选择认证方式为「令牌认证」，令牌为<code>{readeck_token}</code>。全部编辑好之后点击右上角的对勾确认保存，至此发送网页脚本就正式编辑完成了。</p><p><div style=text-align:center><img src=db73b4af0cee6eff2e2aac3eb644ece0_MD5.png alt></div></p><p>那么怎么使用呢？这里只需要使用浏览器打开一篇文章，然后点击分享来展开 Android 系统的原生分享菜单，这里就可以看到刚刚我们创建的这个名为「Add To Readeck」的图标，点击后会提示该脚本已经执行，只要不报错就表示网页已经成功提交到 Readeck 中了，如果不确定可以到 Readeck 的文章列表中查看是否已经发送成功了。</p><h2 id=readeck-进阶用法-2在不同的平台使用不同的姿势阅读><strong>Readeck 进阶用法 2：在不同的平台使用不同的姿势阅读</strong></h2><p>既然文章都已经上传到 Readeck 中了，那么该如何进行阅读呢？和其他商业产品不同的是 Readeck 并没有推出专门的阅读客户端，不过好在 Readeck 提供了很多丰富的阅读方式，体验上还是相当不错的。</p><h3 id=readeck-的准官方客户端pwa-应用><strong>Readeck 的准官方客户端：PWA 应用</strong></h3><p>如果只是用来阅读，那么实际上使用 Web 网页就完全够用，而 Readeck 也已经支持以 PWA 的形式进行安装，那么最为简单的方式就是将其安装成 PWA 应用——使用浏览器访问你部署的 Readeck 服务，桌面端点击地址栏的安装来将其安装成 PWA 应用，至于移动端也是类似。而整体体验下来个人觉得已经足够满足使用需求——尤其是 Readeck 的网页端也针对移动设备进行了优化，阅读沉浸感还是很不错的。</p><p><div style=text-align:center><img src=b81c232782972c95736f65dda8fe21bc_MD5.png alt></div></p><h3 id=在移动端通过支持-opds-的阅读应用来阅读><strong>在移动端通过支持 OPDS 的阅读应用来阅读</strong></h3><p>Readeck 原生支持 OPDS——通过访问路径的形式可以将保存的稍后读文章以电子书的形式发布，这样我们看文章的体验就会和通过电子书类似，那么如果你平时习惯在手机上通过阅读应用来看书，那么就可以将 Readeck 添加成书库在应用中阅读。</p><p><div style=text-align:center><img src=f8f25fbe7f6f47ad5ef27cd5873c0ecc_MD5.png alt></div></p><p>这里，iOS 上可以使用这个名为 cantook 的应用来实现，打开这款应用并点击导航栏中的「书店」同时点击右上角的添加，然后再选择「手动添加书店」，在弹出的新建目录名称和链接对话框中，填写目录名称（这里随便写）以及目录链接（<a href=https://xn--1jqqxr1q3b533cw99a/opds>https:// 你的书库地址 / opds</a>）后，然后点击添加，这时候再点击书店中的新保存的这个新书店，根据提示输入你的 readeck 的账户和密码，就可以顺利进入到目录中了，只不过进入阅读后你会发现还是访问的是 Readeck 的网页端而已。至于 Android 上，支持 OPDS 目录的阅读应用也有不少，比如静读天下也支持挂载 OPDS 目录，这里我就不过多的赘述了。</p><h2 id=总结><strong>总结</strong></h2><p>经过一段时间的试用，我正式将自部署的 Readeck 作为我的主要稍后读服务，并且实现了我接触的场景下全平台的发送网址 / 阅读解决方案，虽然相比商业化的稍后读服务需要自己手动配置多种服务，但由于是自部署的服务，数据安全和网络访问上其实要比商业化的服务要更为可靠，如果你和我一样之前使用的是海外的商业化的稍后读服务，不妨尝试自己部署 Readeck 让数据掌握在自己手中。</p><blockquote><p>关注 <a href="https://sspai.com/link?target=https%3A%2F%2Fwww.xiaohongshu.com%2Fuser%2Fprofile%2F63f5d65d000000001001d8d4">少数派小红书</a>，感受精彩数字生活 🍃</p></blockquote><blockquote><p>实用、好用的 <a href=https://sspai.com/mall>正版软件</a>，少数派为你呈现 🚀</p></blockquote><h2 id=补充><strong>补充</strong></h2><p>nginx 对 readeck的 代理，即使用 xxx.com/read/ 访问。</p><p>docker-compose</p><pre tabindex=0><code>version: &#34;3.0&#34;
services:
  readeck:
    container_name: Readeck
    image: codeberg.org/readeck/readeck:latest
    security_opt:
      - no-new-privileges:true
    restart: on-failure:5
    ports:
      - 4522:8000
    volumes:
      - $HOME/docker_assets/readeck/data:/readeck:rw
    environment:
      READECK_USE_X_FORWARDED: 1
      READECK_SERVER_PREFIX: /read
      READECK_DATABASE_SOURCE: postgres://readeck:readeckpass@readeck-db:5432/readeck
  readeck-db:
    image: postgres:12-alpine
    container_name: Readeck-DB
    hostname: readeck-db
    security_opt:
      - no-new-privileges:true
    healthcheck:
      test:
        - CMD
        - pg_isready
        - -q
        - -d
        - readeck
        - -U
        - readeck
      timeout: 45s
      interval: 10s
      retries: 10
    volumes:
      - $HOME/docker_assets/readeck/db:/var/lib/postgresql/data:rw
    environment:
      POSTGRES_DB: readeck
      POSTGRES_USER: readeck
      POSTGRES_PASSWORD: readeckpass
    restart: on-failure:5
networks: {}
</code></pre><pre tabindex=0><code>location /read/ {
           proxy_pass http://127.0.0.1:4522/read/;
           proxy_set_header Host $host:$server_port;
           proxy_set_header X-Real-Scheme $scheme;
           proxy_set_header X-Real-IP $remote_addr;
           proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;

                   # WebSocket support
           proxy_http_version 1.1;
           proxy_set_header Upgrade $http_upgrade;
           proxy_set_header Connection &#34;upgrade&#34;;

           proxy_read_timeout 120s;
           proxy_next_upstream error;
           proxy_redirect off;
           proxy_buffering off;
        }
</code></pre><p>config.toml</p><pre tabindex=0><code>[main]
log_level = &#34;info&#34;
secret_key = &#34;&#34;
data_directory = &#34;data&#34;

[server]   &lt;--- 这里保持默认就可以了
host = &#34;0.0.0.0&#34;
port = 8000

[database]
source = &#34;postgres://readeck:readeckpass@readeck-db:5432/readeck&#34;
</code></pre><p>开发文档
<a href=https://readeck.org/en/docs/dev>https://readeck.org/en/docs/dev</a></p><p><div style=text-align:center><img src=8bfe65c882e219c01acbbd173cd40c03_MD5.jpeg alt></div></p></main><script src=https://giscus.app/client.js data-repo=talengu/talengu.github.io data-repo-id="MDEwOlJlcG9zaXRvcnk5MTk0NjkxNQ==" data-category=Blog data-category-id=DIC_kwDOBXr_o84C0Qpk data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=/css/giscus.css data-lang=zh-CN crossorigin=anonymous async></script><footer>- END -<hr><a href=/about target=_blank title=About>一塘</a>
© 2025
<a href=/index.xml target=_blank title=RSS>RSS</a></footer></body></html>