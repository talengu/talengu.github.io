<!DOCTYPE html>
<html lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SRT中英文合并Python脚本 | 一塘</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    
<script>
window.MathJax = {
  tex: {
    inlineMath: [['$', '$'], ['\\(', '\\)']],
    displayMath: [['$$', '$$'], ['\\[', '\\]']]
  },
  options: {
    skipHtmlTags: ['script','noscript','style','textarea','pre','code']
  }
};
</script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/about/">一塘</a></li>
      
      <li><a href="/post/">博客</a></li>
      
      <li><a href="/categories/">分类</a></li>
      
      <li><a href="/tags/">标签</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">SRT中英文合并Python脚本</span></h1>


</div>

<div class="post-stats" style="text-align: right;">
   
  2016/04/14
  
</div>




<main>
<h2 id="前言">前言</h2>
<p>从YouTube上看只有中文或英文分开的字幕，下载好视频，想要中英文字幕。可从 <a href="http://mo.dbxdb.com/Yang/setting.html">Getting Youtube subtitles</a> 获取中或英文字幕，然后将其合并，即成中英文双字幕。下面是Python脚本。</p>
<!-- more -->
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">本脚本完成了中英文srt合并的功能
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> os
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">srt2lis</span>(name):
</span></span><span style="display:flex;"><span>    lines <span style="color:#f92672">=</span> open(<span style="color:#e6db74">&#39;srt/&#39;</span><span style="color:#f92672">+</span>name, <span style="color:#e6db74">&#39;r&#39;</span>, encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>)<span style="color:#f92672">.</span>readlines()
</span></span><span style="display:flex;"><span>    lis <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    tmp <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i, line <span style="color:#f92672">in</span> enumerate(lines):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># 以\n 结尾的一个时间点</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> line <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>:
</span></span><span style="display:flex;"><span>            lis<span style="color:#f92672">.</span>append(tmp)
</span></span><span style="display:flex;"><span>            tmp <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>            tmp<span style="color:#f92672">.</span>append(line)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> lis
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">hebing</span>(name_zh):
</span></span><span style="display:flex;"><span>    name_en <span style="color:#f92672">=</span> name_zh[:<span style="color:#f92672">-</span><span style="color:#ae81ff">7</span>] <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;.srt&#39;</span>
</span></span><span style="display:flex;"><span>    out_name<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;out/&#39;</span><span style="color:#f92672">+</span>name_en
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">=</span>open(out_name,<span style="color:#e6db74">&#39;w&#39;</span>,encoding<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;utf-8&#39;</span>)
</span></span><span style="display:flex;"><span>    lis_en<span style="color:#f92672">=</span>srt2lis(name_en)
</span></span><span style="display:flex;"><span>    lis_zh<span style="color:#f92672">=</span>srt2lis(name_zh)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> i,item <span style="color:#f92672">in</span> enumerate(lis_en):
</span></span><span style="display:flex;"><span>        print(item[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>        f<span style="color:#f92672">.</span>write(item[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>        f<span style="color:#f92672">.</span>write(item[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> line <span style="color:#f92672">in</span> lis_zh[i][<span style="color:#ae81ff">2</span>:]:
</span></span><span style="display:flex;"><span>            f<span style="color:#f92672">.</span>write(line)
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> line <span style="color:#f92672">in</span> item[<span style="color:#ae81ff">2</span>:]:
</span></span><span style="display:flex;"><span>            f<span style="color:#f92672">.</span>write(line)
</span></span><span style="display:flex;"><span>        f<span style="color:#f92672">.</span>write(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>)
</span></span><span style="display:flex;"><span>    f<span style="color:#f92672">.</span>close()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>flis<span style="color:#f92672">=</span>os<span style="color:#f92672">.</span>listdir(<span style="color:#e6db74">&#39;srt/&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> os<span style="color:#f92672">.</span>path<span style="color:#f92672">.</span>exists(<span style="color:#e6db74">&#39;out&#39;</span>):
</span></span><span style="display:flex;"><span>    os<span style="color:#f92672">.</span>mkdir(<span style="color:#e6db74">&#39;out&#39;</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> name <span style="color:#f92672">in</span> flis:
</span></span><span style="display:flex;"><span>    print(name)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> name[<span style="color:#f92672">-</span><span style="color:#ae81ff">6</span>:<span style="color:#f92672">-</span><span style="color:#ae81ff">4</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;zh&#39;</span>:
</span></span><span style="display:flex;"><span>        hebing(name)
</span></span></code></pre></div>
</main>






  <footer>
  - END -
  
  <hr/>
  © 2025 一塘
  
  </footer>
  </body>
</html>

