<!doctype html><html class="theme-next pisces use-motion" lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/public/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/public/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/public/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="工具,Hexo,NexT,"><link rel="alternate" href="/public/atom.xml" title="一塘" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/public/images/favicon_blog.png?v=5.1.0"><meta name="description" content="¶前言 本文主要内容为博客搭建的记录与分享，我采用了Hexo博客框架，NexT主题和Gitment评论系统。本文中记录了我博客的安装流程和使用过程中的改进细节。 对Next主题版本的一些说明：我使用的是version: 5.1.0。而使用新版本的NexT v6 主题的同学，有些功能如gitment已经实现，可以直接使用V6。此V6版本对于图片的使用可能会出现问题。仅需看看我下面的2.2小节。 有时"><meta name="keywords" content="工具,Hexo,NexT"><meta property="og:type" content="article"><meta property="og:title" content="个人主页搭建"><meta property="og:url" content="https://talengu.github.io/2016/12/22/build_blog/index.html"><meta property="og:site_name" content="一塘"><meta property="og:description" content="¶前言 本文主要内容为博客搭建的记录与分享，我采用了Hexo博客框架，NexT主题和Gitment评论系统。本文中记录了我博客的安装流程和使用过程中的改进细节。 对Next主题版本的一些说明：我使用的是version: 5.1.0。而使用新版本的NexT v6 主题的同学，有些功能如gitment已经实现，可以直接使用V6。此V6版本对于图片的使用可能会出现问题。仅需看看我下面的2.2小节。 有时"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20181112002650646.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/typora_image.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20181112004401227.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/copyright.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20181122020200453.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20181122020427248.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20181122021516212.png"><meta property="og:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20230208224511501.png"><meta property="og:updated_time" content="2016-12-22T12:39:04.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="个人主页搭建"><meta name="twitter:description" content="¶前言 本文主要内容为博客搭建的记录与分享，我采用了Hexo博客框架，NexT主题和Gitment评论系统。本文中记录了我博客的安装流程和使用过程中的改进细节。 对Next主题版本的一些说明：我使用的是version: 5.1.0。而使用新版本的NexT v6 主题的同学，有些功能如gitment已经实现，可以直接使用V6。此V6版本对于图片的使用可能会出现问题。仅需看看我下面的2.2小节。 有时"><meta name="twitter:image" content="https://talengu.github.io/public/2016/12/22/build_blog/image-20181112002650646.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/public/",scheme:"Pisces",sidebar:{position:"left",display:"post",offset:12,offset_float:0,b2t:!1,scrollpercent:!0},fancybox:!0,motion:!0,duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://talengu.github.io/2016/12/22/build_blog/"><title> 个人主页搭建 | 一塘</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/talengu" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/public/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">一塘</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle"></p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/public/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-archives"><a href="/public/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 往期</a></li><li class="menu-item menu-item-categories"><a href="/public/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br> 分类</a></li><li class="menu-item menu-item-tags"><a href="/public/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocapitalize="off" autocomplete="off" autocorrect="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="https://talengu.github.io/public/2016/12/22/build_blog/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="一塘"><meta itemprop="description" content><meta itemprop="image" content="https://avatars1.githubusercontent.com/u/10290923?v=3&s=460"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="一塘"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 个人主页搭建</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2016-12-22T12:39:04+00:00">2016-12-22</time> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i></span> <time title="更新于" itemprop="dateModified" datetime="2016-12-22T12:39:04+00:00">2016-12-22</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/public/categories/博客搭建/" itemprop="url" rel="index"><span itemprop="name">博客搭建</span></a></span></span> <span class="post-meta-divider">|</span><span class="page-pv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_page_pv"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span title="字数统计">4.9k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span title="阅读时长">22</span></div></div></header><div class="post-body" itemprop="articleBody"><h2 id="前言"><a class="header-anchor" href="#前言">¶</a>前言</h2><p>本文主要内容为博客搭建的记录与分享，我采用了Hexo博客框架，NexT主题和Gitment评论系统。本文中记录了我博客的安装流程和使用过程中的改进细节。</p><p>对Next主题版本的一些说明：我使用的是<code>version: 5.1.0</code>。而使用新版本的NexT v6 主题的同学，有些功能如gitment已经实现，可以直接使用V6。此V6版本对于图片的使用可能会出现问题。仅需看看我下面的2.2小节。</p><p>有时间我会将我修改后的hexo Next theme 基于<code>version: 5.1.0</code>主题，给个独立的git仓，放到github 上。</p><blockquote><p>小技巧：在文章中可以使用<code>&lt;!-- more --&gt;</code>手动进行截断，more上面部分将被放到主页上显示。此为Hexo 提供的方式。</p></blockquote><p>下面就是用<code>&lt;!-- more --&gt;</code>截断的～～</p><a id="more"></a><p>在看安装教程的时候，发现怎么要涉及这么多东西，请大家不要担心，一步步来。同时也不用在意会不会nodejs，框架这些东西，人家已经帮我们把东西都写好了，我们做的就是改改配置文件，最多改改里面swig的模版的一些代码。最后，望大家见谅的是，我对js不太熟，有些地方不是很清楚。欢迎大家在下面评论，或者在github上开issue，共同讨论。</p><h2 id="1-安装"><a class="header-anchor" href="#1-安装">¶</a>1. 安装</h2><h3 id="1-1-简易安装使用"><a class="header-anchor" href="#1-1-简易安装使用">¶</a>1.1 简易安装使用</h3><p>使用新版本的 <code>NexT v6</code> 主题即可，有些功能如 <code>gitment</code> 已经实现。对于图片的使用可能会出现问题。仅需看看我下面的2.2小节。我使用的是 <code>version: 5.1.0</code> 。</p><h3 id="1-2-从头安装"><a class="header-anchor" href="#1-2-从头安装">¶</a>1.2 从头安装</h3><ul><li>安装 nodejs，从nodejs 官网下载安装包 <a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">download page</a></li><li>安装git客户端 <a href="https://git-scm.com/" target="_blank" rel="noopener">git</a></li><li>安装Hexo <code>npm install -g hexo-cli</code> <a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">hexo 中文安装文档</a> <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo中文网站</a></li><li>安装NexT ，NexT是一个比较火的主题。 按官网教程NexT安装即可，官网安装和配置教程比较美滋滋。 <a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">http://theme-next.iissnan.com/getting-started.html</a> NexT Github <a href="https://github.com/iissnan/hexo-theme-next" target="_blank" rel="noopener">https://github.com/iissnan/hexo-theme-next</a> 另外，NexT开发者的博客（最近Next 变成组织了，祝贺）<a href="http://notes.iissnan.com" target="_blank" rel="noopener">http://notes.iissnan.com</a></li></ul><blockquote><p><strong>Ubuntu安装记录</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for Ubuntu16.04</span></span><br><span class="line">$ sudo apt install npm nodejs-legacy</span><br><span class="line">$ sudo npm install hexo-cli -g</span><br><span class="line">$ hexo init blog</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ npm install</span><br><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>ok，安装完的目录结构。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── node_modules  <span class="comment"># nodejs的目录</span></span><br><span class="line">├── public        <span class="comment"># 输出网站目录</span></span><br><span class="line">├── scaffolds     <span class="comment"># hexo 的一些预设模版</span></span><br><span class="line">├── <span class="built_in">source</span>        <span class="comment"># 独立submodule</span></span><br><span class="line">├── themes        <span class="comment"># 主题 里面也有主题的配置文件不要与项目的配置文件搞混</span></span><br><span class="line">├── README.md</span><br><span class="line">├── _config.yml   <span class="comment"># 整个项目配置文件</span></span><br><span class="line">├── db.json</span><br><span class="line">├── index.html。  <span class="comment"># 用于跳转到public下</span></span><br><span class="line">└── package.json</span><br><span class="line"></span><br><span class="line">5 directories, 5 files</span><br></pre></td></tr></table></figure><p>我对博客项目的安排是这样的，总共有两个github项目，一个放素材，一个用hexo框架生成html文件。 在上面的文件目录只能够，将source 文件夹作为一个submodule 用 <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules" target="_blank" rel="noopener">git submodule</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对于我来说</span></span><br><span class="line">$ <span class="built_in">cd</span> path/to/your/github.io/project</span><br><span class="line">$ git submodule add https://github.com/talengu/blog_source <span class="built_in">source</span></span><br></pre></td></tr></table></figure><p>在生成html，下面操作都在 <code>path/to/your/github.io/project</code>，hexo找不到node_modules</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># clone 项目</span></span><br><span class="line">$ git <span class="built_in">clone</span> https://github.com/talengu/talengu.github.io</span><br><span class="line">$ git submodule init</span><br><span class="line">$ git submodule update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 切换到最新的submodule</span></span><br><span class="line">$ <span class="built_in">cd</span> <span class="built_in">source</span></span><br><span class="line">$ git merge origin/master</span><br><span class="line">$ git submodule update</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行npm按照，由于已经生成它会按照package.json文件自动安装</span></span><br><span class="line"><span class="comment"># 没有npm的话 安装 https://nodejs.org/en/download/</span></span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><h2 id="2-配置"><a class="header-anchor" href="#2-配置">¶</a>2. 配置</h2><p>对于在NexT主页上介绍的配置我就不写了，请参考<a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">http://theme-next.iissnan.com/getting-started.html</a> 。</p> <img src="/public/2016/12/22/build_blog/image-20181112002650646.png" alt="image-20181112002650646" width="50%"><p>下面主要对重要的和我自己修改的部分说明没有的进行配置，值得注意的是我的NexT版本是<code>version: 5.1.0</code>。</p><h3 id="2-1-NexT官网的设置"><a class="header-anchor" href="#2-1-NexT官网的设置">¶</a>2.1 NexT官网的设置</h3><p><strong>MathJax</strong></p><p>编辑 <code>主题配置文件</code>， 将 <code>mathjax</code> 下的 <code>enable</code> 设定为 <code>true</code> 即可。 <code>cdn</code> 用于指定 MathJax 的脚本地址，默认是 MathJax 官方提供的 CDN 地址。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># MathJax Support</span></span><br><span class="line"><span class="attr">mathjax:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">cdn:</span> <span class="string">//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML</span></span><br></pre></td></tr></table></figure><p>下面测试 <code>$\frac{d}{dx}c^n=nx^{n-1}$</code> $\frac{d}{dx}c^n=nx^{n-1}$</p><p><strong>Local Search</strong> (推荐) 本地内容搜索引擎。</p><ul><li><p>安装 hexo-generator-searchdb，在站点的根目录下执行以下命令：</p><p><code>npm install hexo-generator-searchdb --save</code></p></li><li><p>编辑 站点配置文件，新增以下内容到任意位置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">   <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">   <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">   <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">   <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure></li><li><p>编辑 <code>主题配置文件</code>，启用本地搜索功能：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Local search</span></span><br><span class="line"><span class="attr">local_search:</span></span><br><span class="line">   <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="2-2-markdown图片"><a class="header-anchor" href="#2-2-markdown图片">¶</a>2.2 markdown图片</h3><p>网上的图片链接可以直接使用，下面对本地图片使用进行配置。</p><p><strong>使用</strong></p><p>安装插件<code>npm install https://github.com/CodeFalling/hexo-asset-image --save</code></p><p>在 <code>主题配置文件</code>（不是next的_config.yml）中设置<code>permalink: :year/:month/:day/:title/</code>，设置 <code>post_asset_folder: true</code>，这主要将文件拷贝到/public文件夹。其中permalink很关键，只能这样设置。</p><blockquote><p>图片必须放到和md文件名字一样的同名字文件夹。 如使用Typora软件写md的话，设置一下image保存路径即可，如下。</p> <img src="/public/2016/12/22/build_blog/typora_image.png" alt="typora_image" width="50%"></blockquote><h3 id="2-3-代码复制"><a class="header-anchor" href="#2-3-代码复制">¶</a>2.3 代码复制</h3><p>为了提高博客代码块的用户体验，仅仅代码高亮还不行，最好还能一键复制代码。故此文将讲述 Hexo NexT 主题博客的代码块复制功能配置。转 <a href="https://www.jianshu.com/p/3e9d614c1e77" target="_blank" rel="noopener">Hexo NexT 代码块复制功能</a></p><h4 id="2-3-1-下载-clipboard-js"><a class="header-anchor" href="#2-3-1-下载-clipboard-js">¶</a>2.3.1 下载 clipboard.js</h4><p>三方插件 clipboardjs ，相关介绍和兼容性<a href="https://clipboardjs.com/" target="_blank" rel="noopener">它主页</a>或 <a href="https://github.com/zenorocha/clipboard.js" target="_blank" rel="noopener">github</a> 上看。</p><p><strong>下载地址：</strong></p><ul><li><a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.js" target="_blank" rel="noopener">clipboard.js</a></li><li><a href="https://raw.githubusercontent.com/zenorocha/clipboard.js/master/dist/clipboard.min.js" target="_blank" rel="noopener">clipboard.min.js</a> <strong>推荐</strong></li></ul><p>保存文件<code>clipboard.js / clipboard.min.js</code> ，目录如下： <code>.\themes\next\source\js\src</code></p><h4 id="2-3-2-clipboardjs-使用"><a class="header-anchor" href="#2-3-2-clipboardjs-使用">¶</a>2.3.2 clipboardjs 使用</h4><p>也是在<code>.\themes\next\source\js\src</code>目录下，创建<code>clipboard-use.js</code>，文件内容如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*页面载入完成后，创建复制按钮*/</span></span><br><span class="line">!<span class="function"><span class="keyword">function</span> (<span class="params">e, t, a</span>) </span>&#123; </span><br><span class="line">  <span class="comment">/* code */</span></span><br><span class="line">  <span class="keyword">var</span> initCopyCode = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> copyHtml = <span class="string">''</span>;</span><br><span class="line">    copyHtml += <span class="string">'&lt;button class="btn-copy" data-clipboard-snippet=""&gt;'</span>;</span><br><span class="line">    copyHtml += <span class="string">'  &lt;i class="fa fa-globe"&gt;&lt;/i&gt;&lt;span&gt;copy&lt;/span&gt;'</span>;</span><br><span class="line">    copyHtml += <span class="string">'&lt;/button&gt;'</span>;</span><br><span class="line">    $(<span class="string">".highlight .code pre"</span>).before(copyHtml);</span><br><span class="line">    <span class="keyword">new</span> ClipboardJS(<span class="string">'.btn-copy'</span>, &#123;</span><br><span class="line">        target: <span class="function"><span class="keyword">function</span>(<span class="params">trigger</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> trigger.nextElementSibling;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  initCopyCode();</span><br><span class="line">&#125;(<span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure><p>在<code>.\themes\next\source\css\_custom\custom.styl</code>样式文件中添加下面代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">//代码块复制按钮</span><br><span class="line"><span class="selector-class">.highlight</span>&#123;</span><br><span class="line">  //方便copy代码按钮（btn-copy）的定位</span><br><span class="line">  <span class="selector-tag">position</span>: <span class="selector-tag">relative</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#eee</span>;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">linear-gradient</span>(#fcfcfc,#eee);</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d5d5d5</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-moz-user-select</span>: none;</span><br><span class="line">    <span class="attribute">-ms-user-select</span>: none;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">-webkit-appearance</span>: none;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">13px</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#333</span>;</span><br><span class="line">    <span class="attribute">-webkit-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">-o-transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">3s</span> ease-in-out;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">2px</span> <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.btn-copy</span> <span class="selector-tag">span</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.btn-copy</span>&#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-3-3-引用"><a class="header-anchor" href="#2-3-3-引用">¶</a>2.3.3 引用</h4><p>在<code>.\themes\next\layout\_layout.swig</code>文件中，添加引用（注：在 swig 末尾或 body 结束标签（<code>&lt;/body&gt;</code>）之前添加）：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 代码块复制功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/clipboard.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"/js/src/clipboard-use.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>想看效果的可以去<a href="https://talengu.github.io/public/2016/12/22/build_blog/">我博客</a>看，截图如下:</p> <img src="/public/2016/12/22/build_blog/image-20181112004401227.png" alt="image-20181112004401227" width="50%"><blockquote><p>熟悉的也可以将<code>clipboard.min.js</code>和<code>clipboard-use.js</code>合并为一个文件，再在<code>.\themes\next\layout\_layout.swig</code>文件中使用。当然<code>clipboard.min.js</code>也可以直接用三方 cdn 的方式引入也行。</p></blockquote><h3 id="2-4-Gitment-评论功能"><a class="header-anchor" href="#2-4-Gitment-评论功能">¶</a>2.4 Gitment 评论功能</h3><p>集成 giment 评论系统的过程。gitment 把评论放到 github 的 issues 系统里，评论支持 md，比较适合程序员.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装gitment</span></span><br><span class="line">$ npm install gitment --save</span><br></pre></td></tr></table></figure><h4 id="2-4-1-注册-OAuth-Application"><a class="header-anchor" href="#2-4-1-注册-OAuth-Application">¶</a>2.4.1 注册 OAuth Application</h4><p>点击 <a href="https://github.com/settings/applications/new" target="_blank" rel="noopener">https://github.com/settings/applications/new</a> 注册，注意<code>Authorization callback URL</code>填自己的网站 url <code>https://xxxx.github.io/</code>. 记下 <strong>Client ID</strong> 和 <strong>Client Secret</strong>.</p><blockquote><p>在新版本NexT v6里面已经支持gitment了所以你只要在github上注册一下 OAuth Application ，填上<strong>Client ID</strong> 和 <strong>Client Secret</strong>.即可</p></blockquote><h4 id="2-4-2-修改themes-next-config-yml"><a class="header-anchor" href="#2-4-2-修改themes-next-config-yml">¶</a>2.4.2 修改<code>themes/next/_config.yml</code></h4><p>在其中添加:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># <span class="selector-tag">Gitment</span></span><br><span class="line"># Introduction: https://imsun.net/posts/gitment-introduction/</span><br><span class="line"><span class="selector-tag">gitment</span>:</span><br><span class="line">  <span class="selector-tag">enable</span>: <span class="selector-tag">true</span></span><br><span class="line">  <span class="selector-tag">githubID</span>: <span class="selector-tag">yourid</span></span><br><span class="line">  <span class="selector-tag">repo</span>: <span class="selector-tag">yourrepo</span></span><br><span class="line">  <span class="selector-tag">ClientID</span>: <span class="selector-tag">yourid</span></span><br><span class="line">  <span class="selector-tag">ClientSecret</span>: <span class="selector-tag">yoursecret</span></span><br><span class="line">  <span class="selector-tag">lazy</span>: <span class="selector-tag">true</span></span><br></pre></td></tr></table></figure><p><strong>注意: 格式要正确，该空格的一定要空格。所有的 yourXXX 都换成自己的.</strong></p><p>在主题的<code>en.yml</code>增加:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">gitmentbutton</span>: <span class="selector-tag">Show</span> <span class="selector-tag">comments</span> <span class="selector-tag">from</span> <span class="selector-tag">Gitment</span></span><br></pre></td></tr></table></figure><p><code>zh-Hans.yml</code>增加:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitmentbutton: 显示 Gitment 评论</span><br></pre></td></tr></table></figure><h4 id="2-4-3-修改主题layout-partials-comments-swig"><a class="header-anchor" href="#2-4-3-修改主题layout-partials-comments-swig">¶</a>2.4.3 修改主题<code>layout/_partials/comments.swig</code></h4><p>找到这个文件里的这两行:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% elseif theme.valine.appid and theme.valine.appkey %&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"vcomments"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上面是最后一个<code>elseif</code>分支，在下面加一个<code>elseif</code>分支:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;% elseif theme.gitment.enable %&#125;</span><br><span class="line">   &#123;% if theme.gitment.lazy %&#125;</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">onclick</span>=<span class="string">"ShowGitment()"</span> <span class="attr">id</span>=<span class="string">"gitment-display-button"</span>&gt;</span>&#123;&#123;  __('gitmentbutton') &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gitment-container"</span> <span class="attr">style</span>=<span class="string">"display:none"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &#123;% else %&#125;</span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gitment-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">   &#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>加完之后下面的内容是原来的，保持不变:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-4-增加gitment-swig"><a class="header-anchor" href="#2-4-4-增加gitment-swig">¶</a>2.4.4 增加<code>gitment.swig</code></h4><p>在主题下<code>layout/_third-party/comments/</code>目录下中添加文件<code>gitment.swig</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.gitment.enable %&#125;</span><br><span class="line">   &#123;% set owner = theme.gitment.githubID %&#125;</span><br><span class="line">   &#123;% set repo = theme.gitment.repo %&#125;</span><br><span class="line">   &#123;% set cid = theme.gitment.ClientID %&#125;</span><br><span class="line">   &#123;% set cs = theme.gitment.ClientSecret %&#125;</span><br><span class="line">   <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://imsun.github.io/gitment/style/default.css"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://imsun.github.io/gitment/dist/gitment.browser.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   &#123;% if not theme.gitment.lazy %&#125;</span><br><span class="line">       <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">           <span class="keyword">var</span> gitment = <span class="keyword">new</span> Gitment(&#123;</span></span><br><span class="line"><span class="javascript">               id: <span class="built_in">window</span>.location.pathname, </span></span><br><span class="line"><span class="javascript">               owner: <span class="string">'&#123;&#123;owner&#125;&#125;'</span>,</span></span><br><span class="line"><span class="javascript">               repo: <span class="string">'&#123;&#123;repo&#125;&#125;'</span>,</span></span><br><span class="line">               oauth: &#123;</span><br><span class="line"><span class="javascript">                   client_id: <span class="string">'&#123;&#123;cid&#125;&#125;'</span>,</span></span><br><span class="line"><span class="javascript">                   client_secret: <span class="string">'&#123;&#123;cs&#125;&#125;'</span>,</span></span><br><span class="line">               &#125;&#125;);</span><br><span class="line"><span class="javascript">           gitment.render(<span class="string">'gitment-container'</span>);</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   &#123;% else %&#125;</span><br><span class="line">       <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">           <span class="function"><span class="keyword">function</span> <span class="title">ShowGitment</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">               <span class="built_in">document</span>.getElementById(<span class="string">"gitment-display-button"</span>).style.display = <span class="string">"none"</span>;</span></span><br><span class="line"><span class="javascript">               <span class="built_in">document</span>.getElementById(<span class="string">"gitment-container"</span>).style.display = <span class="string">"block"</span>;</span></span><br><span class="line"><span class="javascript">               <span class="keyword">var</span> gitment = <span class="keyword">new</span> Gitment(&#123;</span></span><br><span class="line"><span class="javascript">                   id: <span class="built_in">document</span>.location.href, </span></span><br><span class="line"><span class="javascript">                   owner: <span class="string">'&#123;&#123;owner&#125;&#125;'</span>,</span></span><br><span class="line"><span class="javascript">                   repo: <span class="string">'&#123;&#123;repo&#125;&#125;'</span>,</span></span><br><span class="line">                   oauth: &#123;</span><br><span class="line"><span class="javascript">                       client_id: <span class="string">'&#123;&#123;cid&#125;&#125;'</span>,</span></span><br><span class="line"><span class="javascript">                       client_secret: <span class="string">'&#123;&#123;cs&#125;&#125;'</span>,</span></span><br><span class="line">                   &#125;&#125;);</span><br><span class="line"><span class="javascript">               gitment.render(<span class="string">'gitment-container'</span>);</span></span><br><span class="line">           &#125;</span><br><span class="line">       <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">   &#123;% endif %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>然后在主题下<code>layout/_third-party/comments/index.swig</code>文件中引入 gitment.swig 文件：</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% include 'gitment.swig' %&#125;</span><br></pre></td></tr></table></figure><h4 id="2-4-5-添加gitment-styl"><a class="header-anchor" href="#2-4-5-添加gitment-styl">¶</a>2.4.5 添加<code>gitment.styl</code></h4><p>在主题下<code>source/css/_common/components/third-party/</code>目录下添加<code>gitment.styl</code>文件，设置 button 的样式：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#gitment-display-button</span>&#123;</span><br><span class="line">     <span class="attribute">display</span>: inline-block;</span><br><span class="line">     <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">15px</span>;</span><br><span class="line">     <span class="attribute">color</span>: <span class="number">#0a9caf</span>;</span><br><span class="line">     <span class="attribute">cursor</span>: pointer;</span><br><span class="line">     <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">     <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#0a9caf</span>;</span><br><span class="line">     <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="selector-id">#gitment-display-button</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">     <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">     <span class="attribute">background</span>: <span class="number">#0a9caf</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>然后在主题下<code>source/css/_common/components/third-party/third-party.styl</code>文件中引入相应的 CSS 样式即可:</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@import</span> <span class="string">"gitment"</span>;</span><br></pre></td></tr></table></figure><p>这样就 ok 了！</p><h4 id="2-4-6-易错点"><a class="header-anchor" href="#2-4-6-易错点">¶</a>2.4.6 易错点</h4><ol><li>修改<code>themes/next/_config.yml</code>这个文件时，格式要正确。另外，repo 是你要想创建 issues 的仓库，完全可以跟博文所放的仓库不一个。id 就写自己的 github 用户名就可以，这个用户名跟 repo 必须匹配。</li><li>gitment 可能不支持链接地址里有中文，所以安装 gitment 前一定要参考<a href="http://yangq.me/post/19acb239.html" target="_blank" rel="noopener">前文</a>把链接持久化搞成全是英文的。</li><li>同一篇文章需要<a href="https://github.com/imsun/gitment/issues/68" target="_blank" rel="noopener">初始化 comment 两次的问题</a>，是因为 <a href="http://xxx.com/post/ab9bb85a.html" target="_blank" rel="noopener">http://xxx.com/post/ab9bb85a.html</a> 和点击<strong>阅读全文</strong>进去的链接 <a href="http://yangq.me/post/ab9bb85a.html#more" target="_blank" rel="noopener">http://xxx.com/post/ab9bb85a.html#more</a> 对 issues 来说是不同的，所以创建两次。解决方法就是<code>gitment.swig</code>里 id 弄成<code>window.location.pathname</code>而不是<code>document.location.href</code>。</li><li>初始化评论后，可以到 github 里自己放 issues 的仓库查看 issues 是否创建成功，有时候浏览器可能会有缓存依然提示你初始化评论。一般过个两分钟就显示正常了。</li></ol><h4 id="2-4-7-参考文档"><a class="header-anchor" href="#2-4-7-参考文档">¶</a>2.4.7 参考文档</h4><ol><li><a href="http://www.jianshu.com/p/10134c474991" target="_blank" rel="noopener">主要参考文档</a></li><li><a href="https://meesong.github.io/StaticBlog/2017/NexT+Gitment/" target="_blank" rel="noopener">一种相对简略的配置方式</a></li><li><a href="https://github.com/imsun/gitment/issues" target="_blank" rel="noopener">作者 issue</a></li></ol><h3 id="2-x-gittalk-评论系统"><a class="header-anchor" href="#2-x-gittalk-评论系统">¶</a>2.x gittalk 评论系统</h3><p><a href="https://iochen.com/2018/01/06/use-gitalk-in-hexo/" target="_blank" rel="noopener">https://iochen.com/2018/01/06/use-gitalk-in-hexo/</a></p><p>403 error:<br> <a href="https://zhuanlan.zhihu.com/p/350735142" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/350735142</a></p><p>申请个人worker <a href="https://dash.cloudflare.com/" target="_blank" rel="noopener">https://dash.cloudflare.com/</a></p><h3 id="2-x-glup加速"><a class="header-anchor" href="#2-x-glup加速">¶</a>2.x glup加速</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install --global gulp</span><br><span class="line">npm install gulp-minify-css gulp-uglify gulp-htmlmin gulp-htmlclean  gulp-imagemin --save</span><br></pre></td></tr></table></figure><p>使用Gulp压缩Hexo博客静态资源, 加快响应速度 <a href="https://blog.csdn.net/cpohui/article/details/98525437" target="_blank" rel="noopener">https://blog.csdn.net/cpohui/article/details/98525437</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 设置 淘宝镜像源</span><br><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">// 查看 使用的 镜像源</span><br><span class="line">npm config get registry</span><br><span class="line"></span><br><span class="line">// 安装 淘宝镜像源</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure><h3 id="2-x-字体大小"><a class="header-anchor" href="#2-x-字体大小">¶</a>2.x 字体大小</h3><p>Hexo 修改字体大小 <a href="https://www.jianshu.com/p/02fbd409988c" target="_blank" rel="noopener">https://www.jianshu.com/p/02fbd409988c</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">themes/next/source/css/_variables</span><br></pre></td></tr></table></figure><p><a href="https://zenreal.github.io/posts/44730/" target="_blank" rel="noopener">页面美化</a></p><h3 id="2-x-利用-Github-Actions-自动部署-Hexo-博客"><a class="header-anchor" href="#2-x-利用-Github-Actions-自动部署-Hexo-博客">¶</a>2.x 利用 Github Actions 自动部署 Hexo 博客</h3><p>生成RSA密码对，部署到任务仓。 <a href="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/" target="_blank" rel="noopener">https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/</a></p><h3 id="2-5-copyright文字添加"><a class="header-anchor" href="#2-5-copyright文字添加">¶</a>2.5 copyright文字添加</h3><p><strong>效果</strong> 可以在md文件里面控制是否使用这个组建。</p> <img src="/public/2016/12/22/build_blog/copyright.png" alt="copyright" title="copyright 效果" width="50%"><p><strong>使用</strong></p><p>在md文件中的front-head部分，设置 <code>copyright:true</code>如下面。 设置next/_config.yml 文件，中设置<code>post_copyright</code> 的选项 <code>enable</code>。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">---</span></span><br><span class="line"><span class="selector-tag">title</span>: 个人主页搭建</span><br><span class="line"><span class="selector-tag">date</span>: 2016<span class="selector-tag">-12-22</span> 12<span class="selector-pseudo">:39</span><span class="selector-pseudo">:04</span></span><br><span class="line"><span class="selector-tag">categories</span>:</span><br><span class="line">  <span class="selector-tag">-</span> 博客搭建</span><br><span class="line"><span class="selector-tag">tags</span>:</span><br><span class="line">  <span class="selector-tag">-</span> <span class="selector-tag">Hexo</span></span><br><span class="line"><span class="selector-tag">comments</span>: <span class="selector-tag">true</span></span><br><span class="line"><span class="selector-tag">copyright</span>: <span class="selector-tag">true</span></span><br><span class="line"><span class="selector-tag">---</span></span><br></pre></td></tr></table></figure><p><strong>说明</strong> 对原next的改变</p><p>对于一些原创的文本可以设置版权的声明，这个是next自带的，我进行了修改。next的_config.yml 文件，中设置<code>post_copyright</code> 的选项，启用它会对所有的页面添加，我多加了一个page的copyright使能判断。 对<code>next/layout/_macro/post-copyright.swig</code>修改。下面为修改后的文件。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.post_copyright.enable %&#125;</span><br><span class="line">&#123;% if page.copyright %&#125; <span class="comment">&lt;!-- 加上page md文件头部使能--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"post-copyright"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-author"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('post.copyright.author') + __('symbol.colon') &#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">      &#123;&#123; config.author &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-link"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('post.copyright.link') + __('symbol.colon') &#125;&#125;<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- url的修正，可能要根据你的情况修改--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"&#123;&#123; config.url &#125;&#125;&#123;&#123; config.root &#125;&#125;&#123;&#123; post.path &#125;&#125;"</span> <span class="attr">title</span>=<span class="string">"&#123;&#123; post.title &#125;&#125;"</span>&gt;</span>&#123;&#123; config.url &#125;&#125;&#123;&#123; config.root &#125;&#125;&#123;&#123; post.path &#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"post-copyright-license"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">strong</span>&gt;</span>&#123;&#123; __('post.copyright.license_title') + __('symbol.colon') &#125;&#125; <span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">      &#123;&#123; __('post.copyright.license_content', theme.post_copyright.license_url, theme.post_copyright.license) &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><h3 id="2-6-RSS-可选"><a class="header-anchor" href="#2-6-RSS-可选">¶</a>2.6 RSS (可选)</h3><p>对一些网站的feed 的订阅 如rss，使用来进行订阅网站的rss，现在一些网站已经没有rss服务，google也停掉了google rss reader的项目，所以看你的喜好。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装hexo-generator-feed</span></span><br><span class="line">npm install hexo-generator-feed --save</span><br><span class="line"><span class="comment"># 在_config.yml 启用feed</span></span><br></pre></td></tr></table></figure><blockquote><p>tips: 由于我博客在public文件夹下，导致hexo-generator-feed生成的地址不对。 在node_modules/hexo-generator-feed/lib/generator.js` 第35行下面添加一行:</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url += <span class="string">'public/'</span></span><br></pre></td></tr></table></figure><p>可用此脚本替换 <code>sed -i &quot;36c url += 'public/';&quot; node_modules/hexo-generator-feed/lib/generator.js</code></p><p>note: mac中手动修改，sed指令<a href="https://blog.csdn.net/bertie_Jnn/article/details/51219670" target="_blank" rel="noopener">不一样</a></p><h3 id="2-7-添加-fork-me-github"><a class="header-anchor" href="#2-7-添加-fork-me-github">¶</a>2.7 添加 fork me github</h3><p>效果</p> <img src="/public/2016/12/22/build_blog/image-20181122020200453.png" alt="image-20181122020200453" width="50%"><p>在<a href="https://github.com/blog/273-github-ribbons" target="_blank" rel="noopener">GitHub Ribbons</a>或<a href="http://tholman.com/github-corners/" target="_blank" rel="noopener">GitHub Corners</a>选择一款你喜欢的挂饰。比如下面的 github corners 在<code>your-url</code>填上你的 url 。</p> <img src="/public/2016/12/22/build_blog/image-20181122020427248.png" alt="image-20181122020427248" width="50%"><p>将刚刚复制的挂饰代码，添加到<code>themes/next/layout/_layout.swig</code>文件中，添加位置，放在<code>&lt;div class=&quot;headband&quot;&gt;&lt;/div&gt;</code>的下方如下图。</p> <img src="/public/2016/12/22/build_blog/image-20181122021516212.png" alt="image-20181122021516212" width="50%"><h3 id="2-8-添加注脚"><a class="header-anchor" href="#2-8-添加注脚">¶</a>2.8 添加注脚</h3><p>hexo-renderer-markdown-it插件，<a href="https://www.dazhuanlan.com/2019/11/22/5dd6faa42d279/" target="_blank" rel="noopener">参考</a></p><p>首先卸载原来的markdown渲染插件（我这里原来是marked，这是Hexo提供的默认渲染插件），然后把hexo-renderer-markdown-it装上：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure><p>然后在根目录下的<code>_config.yml</code>中进行相应的配置。<a href="https://github.com/hexojs/hexo-renderer-markdown-it/wiki/Simple-Configuration" target="_blank" rel="noopener">简单的配置方法</a>只包括设置markdown格式，这里就不详述了。<a href="https://github.com/hexojs/hexo-renderer-markdown-it/wiki/Advanced-Configuration" target="_blank" rel="noopener">高级的配置方法</a>中包含很多可选项。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span><br><span class="line"><span class="selector-tag">markdown</span>:</span><br><span class="line">  # 渲染设置</span><br><span class="line">  <span class="selector-tag">render</span>:</span><br><span class="line">    # 置为<span class="selector-tag">true</span>时，<span class="selector-tag">html</span>内容保持不变；置为<span class="selector-tag">false</span>时，<span class="selector-tag">html</span>内容将被转义成普通字符串</span><br><span class="line">    <span class="selector-tag">html</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 是否生成与<span class="selector-tag">XHTML</span>完全兼容的标签（虽然我不懂是什么意思）</span><br><span class="line">    <span class="selector-tag">xhtmlOut</span>: <span class="selector-tag">false</span></span><br><span class="line">    # 置为<span class="selector-tag">true</span>时，每个换行符都被渲染成一个&lt;<span class="selector-tag">br</span>&gt;（即<span class="selector-tag">Hexo</span>的默认表现）；置为<span class="selector-tag">false</span>时，只有空行才会被渲染为&lt;<span class="selector-tag">br</span>&gt;（<span class="selector-tag">GFM</span>的默认表现）</span><br><span class="line">    <span class="selector-tag">breaks</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 是否自动识别链接并把它渲染成链接</span><br><span class="line">    <span class="selector-tag">linkify</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 是否自动识别印刷格式（意思是把(<span class="selector-tag">c</span>)渲染为©这样的）</span><br><span class="line">    <span class="selector-tag">typographer</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 如果<span class="selector-tag">typographer</span>被设置为<span class="selector-tag">true</span>，则该选项用于设置将<span class="selector-tag">dumb</span> <span class="selector-tag">quotes</span>（""）自动替换为<span class="selector-tag">smart</span> <span class="selector-tag">quotes</span></span><br><span class="line">    quotes: '“”‘’'</span><br><span class="line">  # 设置所需插件</span><br><span class="line">  <span class="selector-tag">plugins</span>:</span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-abbr</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-footnote</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-ins</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-sub</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-sup</span></span><br><span class="line">  # 锚点设置（因为我没有尝试相关内容，所以就不翻译相关说明了）</span><br><span class="line">  <span class="selector-tag">anchors</span>:</span><br><span class="line">    <span class="selector-tag">level</span>: 2</span><br><span class="line">    collisionSuffix: 'v'</span><br><span class="line">    <span class="selector-tag">permalink</span>: <span class="selector-tag">true</span></span><br><span class="line">    <span class="selector-tag">permalinkClass</span>: <span class="selector-tag">header-anchor</span></span><br><span class="line">    <span class="selector-tag">permalinkSymbol</span>: ¶</span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"># ref https://www.dazhuanlan.com/2019/11/22/5dd6faa42d279/</span><br><span class="line">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span><br><span class="line"><span class="selector-tag">markdown</span>:</span><br><span class="line">  # 渲染设置</span><br><span class="line">  <span class="selector-tag">render</span>:</span><br><span class="line">    # 置为<span class="selector-tag">true</span>时，<span class="selector-tag">html</span>内容保持不变；置为<span class="selector-tag">false</span>时，<span class="selector-tag">html</span>内容将被转义成普通字符串</span><br><span class="line">    <span class="selector-tag">html</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 是否生成与<span class="selector-tag">XHTML</span>完全兼容的标签（虽然我不懂是什么意思）</span><br><span class="line">    <span class="selector-tag">xhtmlOut</span>: <span class="selector-tag">false</span></span><br><span class="line">    # 置为<span class="selector-tag">true</span>时，每个换行符都被渲染成一个&lt;<span class="selector-tag">br</span>&gt;（即<span class="selector-tag">Hexo</span>的默认表现）；置为<span class="selector-tag">false</span>时，只有空行才会被渲染为&lt;<span class="selector-tag">br</span>&gt;（<span class="selector-tag">GFM</span>的默认表现）</span><br><span class="line">    <span class="selector-tag">breaks</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 是否自动识别链接并把它渲染成链接</span><br><span class="line">    <span class="selector-tag">linkify</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 是否自动识别印刷格式（意思是把(<span class="selector-tag">c</span>)渲染为©这样的）</span><br><span class="line">    <span class="selector-tag">typographer</span>: <span class="selector-tag">true</span></span><br><span class="line">    # 如果<span class="selector-tag">typographer</span>被设置为<span class="selector-tag">true</span>，则该选项用于设置将<span class="selector-tag">dumb</span> <span class="selector-tag">quotes</span>（""）自动替换为<span class="selector-tag">smart</span> <span class="selector-tag">quotes</span></span><br><span class="line">    quotes: '“”‘’'</span><br><span class="line">  # 设置所需插件</span><br><span class="line">  <span class="selector-tag">plugins</span>:</span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-abbr</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-footnote</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-ins</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-sub</span></span><br><span class="line">    <span class="selector-tag">-</span> <span class="selector-tag">markdown-it-sup</span></span><br><span class="line">  # 锚点设置（因为我没有尝试相关内容，所以就不翻译相关说明了）</span><br><span class="line">  # <span class="selector-tag">anchors</span>:</span><br><span class="line">  #   <span class="selector-tag">level</span>: 2</span><br><span class="line">  #   collisionSuffix: 'v'</span><br><span class="line">  #   <span class="selector-tag">permalink</span>: <span class="selector-tag">true</span></span><br><span class="line">  #   <span class="selector-tag">permalinkClass</span>: <span class="selector-tag">header-anchor</span></span><br><span class="line">  #   <span class="selector-tag">permalinkSymbol</span>: ¶</span><br><span class="line">  <span class="selector-tag">anchors</span>:</span><br><span class="line">    # <span class="selector-tag">Minimum</span> <span class="selector-tag">level</span> <span class="selector-tag">for</span> <span class="selector-tag">ID</span> <span class="selector-tag">creation</span>. (<span class="selector-tag">Ex</span>. <span class="selector-tag">h2</span> <span class="selector-tag">to</span> <span class="selector-tag">h6</span>)</span><br><span class="line">    <span class="selector-tag">level</span>: 2</span><br><span class="line">    # <span class="selector-tag">A</span> <span class="selector-tag">suffix</span> <span class="selector-tag">that</span> <span class="selector-tag">is</span> <span class="selector-tag">prepended</span> <span class="selector-tag">to</span> <span class="selector-tag">the</span> <span class="selector-tag">number</span> <span class="selector-tag">given</span> <span class="selector-tag">if</span> <span class="selector-tag">the</span> <span class="selector-tag">ID</span> <span class="selector-tag">is</span> <span class="selector-tag">repeated</span>.</span><br><span class="line">    collisionSuffix: ''           </span><br><span class="line">    # <span class="selector-tag">If</span> `<span class="selector-tag">true</span>`, <span class="selector-tag">creates</span> <span class="selector-tag">an</span> <span class="selector-tag">anchor</span> <span class="selector-tag">tag</span> <span class="selector-tag">with</span> <span class="selector-tag">a</span> <span class="selector-tag">permalink</span> <span class="selector-tag">besides</span> <span class="selector-tag">the</span> <span class="selector-tag">heading</span>.</span><br><span class="line">    <span class="selector-tag">permalink</span>: <span class="selector-tag">true</span>              </span><br><span class="line">    # <span class="selector-tag">Class</span> <span class="selector-tag">used</span> <span class="selector-tag">for</span> <span class="selector-tag">the</span> <span class="selector-tag">permalink</span> <span class="selector-tag">anchor</span> <span class="selector-tag">tag</span>.</span><br><span class="line">    <span class="selector-tag">permalinkClass</span>: <span class="selector-tag">header-anchor</span></span><br><span class="line">    # Set to 'right' to add permalink after heading</span><br><span class="line">    permalinkSide: 'left'</span><br><span class="line">    # <span class="selector-tag">The</span> <span class="selector-tag">symbol</span> <span class="selector-tag">used</span> <span class="selector-tag">to</span> <span class="selector-tag">make</span> <span class="selector-tag">the</span> <span class="selector-tag">permalink</span></span><br><span class="line">    <span class="selector-tag">permalinkSymbol</span>: ¶</span><br><span class="line">    # <span class="selector-tag">Transform</span> <span class="selector-tag">anchor</span> <span class="selector-tag">to</span> (1) <span class="selector-tag">lower</span> <span class="selector-tag">case</span>; (2) <span class="selector-tag">upper</span> <span class="selector-tag">case</span></span><br><span class="line">    <span class="selector-tag">case</span>: 0</span><br><span class="line">    # <span class="selector-tag">Replace</span> <span class="selector-tag">space</span> <span class="selector-tag">with</span> <span class="selector-tag">a</span> <span class="selector-tag">character</span></span><br><span class="line">    separator: '-'</span><br></pre></td></tr></table></figure><h3 id="2-x-添加运行时间"><a class="header-anchor" href="#2-x-添加运行时间">¶</a>2.x 添加运行时间</h3><p><a href="https://blog.csdn.net/jieruis/article/details/104024884?utm_source=app&amp;app_version=4.21.0" target="_blank" rel="noopener">https://blog.csdn.net/jieruis/article/details/104024884?utm_source=app&amp;app_version=4.21.0</a></p><h3 id="2-x-使用Github-Action-自动布置"><a class="header-anchor" href="#2-x-使用Github-Action-自动布置">¶</a>2.x 使用Github Action 自动布置</h3><p>ruanyifeng</p><p><a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">![](https://github.com/组织或个人/仓库</span><br><span class="line">/workflows/执行Action的Name注意转码/badge.svg)</span><br></pre></td></tr></table></figure><p>编译过程图标 <a href="https://lindexi.oschina.io/post/Github-%E6%B7%BB%E5%8A%A0-Action-%E7%BC%96%E8%AF%91%E5%9B%BE%E6%A0%87.html" target="_blank" rel="noopener">https://lindexi.oschina.io/post/Github-添加-Action-编译图标.html</a></p><p>自动部署</p><p>ref: <a href="https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/" target="_blank" rel="noopener">https://sanonz.github.io/2020/deploy-a-hexo-blog-from-github-actions/</a></p><h3 id="2-x-配置clustrmaps"><a class="header-anchor" href="#2-x-配置clustrmaps">¶</a>2.x 配置clustrmaps</h3><p><img src="/public/2016/12/22/build_blog/image-20230208224511501.png" alt></p><ul><li>网站注册后，访问 <a href="https://clustrmaps.com/add" target="_blank" rel="noopener">Enter your website address</a> 添加自己的网站地址，选择免费的服务。</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">"text/javascript"</span> id=<span class="string">"clustrmaps"</span> src=<span class="string">"//clustrmaps.com/map_v2.js?d=5Y5S382WVdS5Rafm-8SR-tSr5c6erGKcUlEEEb5LZBc"</span>&gt;&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>将代码插入到 <code>\themes\next\layout\_macro\sidebar.swig</code> 文件的图层。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">aside</span> &gt;</span></span><br><span class="line">    &#123;% if theme.sidebar.onmobile %&#125;</span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"sidebar-inner"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      &#123;% set display_toc = is_post and theme.toc.enable or is_page and theme.toc.enable %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- Insert clustrmaps.com --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span> <span class="attr">id</span>=<span class="string">'clustrmaps'</span> <span class="attr">src</span>=<span class="string">'//cdn.clustrmaps.com/map_v2.js?</span></span></span><br><span class="line"><span class="tag"><span class="string"></span></span></span><br><span class="line"><span class="tag"><span class="string">cl=ffffff&amp;w=a&amp;t=n&amp;d=4sW93oXXX0e8'</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      &#123;% if display_toc and toc(page.content).length &gt; 1 %&#125;</span><br></pre></td></tr></table></figure><p>ref: <a href="https://www.likecs.com/show-305889652.html#sc=500" target="_blank" rel="noopener">https://www.likecs.com/show-305889652.html#sc=500</a></p><h2 id="TODO"><a class="header-anchor" href="#TODO">¶</a>TODO</h2><p>这个TODO中放的是，我接下来对博客搭建这个项目，要做的事。平台的debug，内容的设计等等。</p><ul><li><p>[ ] 续写这篇博客，后面根据内容多少看要不要拆分这个博客。</p></li><li><p>[ ] 永久化连接 permalink ​ 这permalink 和本地图片的拷贝复制有关不好改，下面是可能的方法，由于现在的评论还比较少，后面改进。 ​ <a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener">https://github.com/rozbo/hexo-abbrlink</a> ​ <a href="https://github.com/EqualMa/hexo-plugin-permalink-pathed-title" target="_blank" rel="noopener">https://github.com/EqualMa/hexo-plugin-permalink-pathed-title</a></p></li><li><p>[ ] gitment object ProgressEvent #170 ​ gitment 出现问题 作者好像放弃了，所以网上有一些解决方案，(gitment issue #170)(<a href="https://github.com/imsun/gitment/issues/170" target="_blank" rel="noopener">https://github.com/imsun/gitment/issues/170</a>)</p><p>​ 临时使用<code>https://www.wenjunjiang.win/js/gitment.js</code> 这个gitment.js</p></li><li><p>[ ] 编写规范 得写一个博客的编写规范。分类、标签的使用，图片的使用，公式的使用等等</p></li></ul><h2 id="博客编写规范"><a class="header-anchor" href="#博客编写规范">¶</a>博客编写规范</h2><ul><li>github上有项目图片就从项目中链接过来，比如头像就是我github的头像</li><li>重要的图片存在本项目中</li><li>Typora的使用</li></ul><h2 id="参考"><a class="header-anchor" href="#参考">¶</a>参考</h2><p><a href="https://www.jianshu.com/p/9f0e90cc32c2" target="_blank" rel="noopener">Hexo-NexT配置超炫网页效果</a> 好多新奇玩意儿～</p><p><a href="https://blog.csdn.net/yanzi1225627/article/details/77890414" target="_blank" rel="noopener">Hexo gitment</a></p><p>原文地址</p><p>图标网站 <a href="https://icons8.com/icon/new-icons/all" target="_blank" rel="noopener">icon8 web</a> 比较舒服 <a href="http://fontawesome.io" target="_blank" rel="noopener">http://fontawesome.io</a> 标准风格 <a href="https://www.easyicon.net/" target="_blank" rel="noopener">https://www.easyicon.net/</a> 国内的图标</p><p>补充修改进行中，，，</p></div><div></div><div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 一塘</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://talengu.github.io/public/2016/12/22/build_blog/" title="个人主页搭建">https://talengu.github.io/public/2016/12/22/build_blog/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"> <a href="/public/tags/工具/" rel="tag"># 工具</a> <a href="/public/tags/Hexo/" rel="tag"># Hexo</a> <a href="/public/tags/NexT/" rel="tag"># NexT</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/public/2016/04/14/shells/youtube_src_combine/" rel="next" title="SRT中英文合并Python脚本"><i class="fa fa-chevron-left"></i> SRT中英文合并Python脚本</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/public/2017/04/14/readings/yingyingzhuan/" rel="prev" title="「转」琉璃易碎，人言易坠——关于《莺莺传》的叙事">「转」琉璃易碎，人言易坠——关于《莺莺传》的叙事<i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"></div></div></div><div class="comments" id="comments"><div id="gitalk-container"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap"> 文章目录</li><li class="sidebar-nav-overview" data-target="site-overview"> 站点概览</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="https://avatars1.githubusercontent.com/u/10290923?v=3&s=460" alt="一塘"><p class="site-author-name" itemprop="name">一塘</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/public/archives"><span class="site-state-item-count">77</span> <span class="site-state-item-name">博客</span></a></div><div class="site-state-item site-state-categories"> <a href="/public/categories/index.html"><span class="site-state-item-count">57</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/public/tags/index.html"><span class="site-state-item-count">125</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/public/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/talengu" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="/public/2015/01/01/About" target="_blank" title="About"><i class="fa fa-fw fa-globe"></i> About</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#前言"><span class="nav-text">¶前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-安装"><span class="nav-text">¶1. 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-简易安装使用"><span class="nav-text">¶1.1 简易安装使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-从头安装"><span class="nav-text">¶1.2 从头安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-配置"><span class="nav-text">¶2. 配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-NexT官网的设置"><span class="nav-text">¶2.1 NexT官网的设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-markdown图片"><span class="nav-text">¶2.2 markdown图片</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-代码复制"><span class="nav-text">¶2.3 代码复制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-1-下载-clipboard-js"><span class="nav-text">¶2.3.1 下载 clipboard.js</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-2-clipboardjs-使用"><span class="nav-text">¶2.3.2 clipboardjs 使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-3-引用"><span class="nav-text">¶2.3.3 引用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-Gitment-评论功能"><span class="nav-text">¶2.4 Gitment 评论功能</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-1-注册-OAuth-Application"><span class="nav-text">¶2.4.1 注册 OAuth Application</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-2-修改themes-next-config-yml"><span class="nav-text">¶2.4.2 修改themes/next/_config.yml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-3-修改主题layout-partials-comments-swig"><span class="nav-text">¶2.4.3 修改主题layout/_partials/comments.swig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-4-增加gitment-swig"><span class="nav-text">¶2.4.4 增加gitment.swig</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-5-添加gitment-styl"><span class="nav-text">¶2.4.5 添加gitment.styl</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-6-易错点"><span class="nav-text">¶2.4.6 易错点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-7-参考文档"><span class="nav-text">¶2.4.7 参考文档</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-gittalk-评论系统"><span class="nav-text">¶2.x gittalk 评论系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-glup加速"><span class="nav-text">¶2.x glup加速</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-字体大小"><span class="nav-text">¶2.x 字体大小</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-利用-Github-Actions-自动部署-Hexo-博客"><span class="nav-text">¶2.x 利用 Github Actions 自动部署 Hexo 博客</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-copyright文字添加"><span class="nav-text">¶2.5 copyright文字添加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-6-RSS-可选"><span class="nav-text">¶2.6 RSS (可选)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-7-添加-fork-me-github"><span class="nav-text">¶2.7 添加 fork me github</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-8-添加注脚"><span class="nav-text">¶2.8 添加注脚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-添加运行时间"><span class="nav-text">¶2.x 添加运行时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-使用Github-Action-自动布置"><span class="nav-text">¶2.x 使用Github Action 自动布置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-x-配置clustrmaps"><span class="nav-text">¶2.x 配置clustrmaps</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TODO"><span class="nav-text">¶TODO</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#博客编写规范"><span class="nav-text">¶博客编写规范</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-text">¶参考</span></a></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2015 - <span itemprop="copyrightYear">2023</span><span class="with-love"><i class="fa fa-heart"></i></span> <span class="author" itemprop="copyrightHolder">一塘</span></div><div class="timemark"> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("01/01/2015 17:38:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script></div><div class="powered-by"> 由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动</div><div class="theme-info"> 主题 - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a></div><div class="busuanzi-count"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span><span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/public/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/public/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/public/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/public/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/public/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/public/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/public/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/public/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/public/js/src/affix.js?v=5.1.0"></script><script type="text/javascript" src="/public/js/src/schemes/pisces.js?v=5.1.0"></script><script type="text/javascript" src="/public/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/public/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/public/js/src/bootstrap.js?v=5.1.0"></script><link rel="stylesheet" href="//cdn.bootcss.com/gitalk/1.6.2/gitalk.min.css"><script src="//cdn.bootcss.com/gitalk/1.6.2/gitalk.min.js"></script><script type="text/javascript">var gitalk=new Gitalk({clientID:"315ada12fed7a0ffb6b7",clientSecret:"5f15e644005fabee93cc7f50d70c78c57dce0e86",repo:"talengu.github.io",owner:"talengu",admin:["talengu"],id:location.pathname,labels:["Gitalk"],perPage:15,pagerDirection:"last",createIssueManually:!0,distractionFreeMode:!1,proxy:"https://gitalk.talengu.workers.dev/?https://github.com/login/oauth/access_token"});gitalk.render("gitalk-container")</script><script type="text/javascript">var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/public/"+search_path;function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".popup").toggle()}var searchFunc=function(e,c,s){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var t=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),a=document.getElementById(c),r=document.getElementById(s);a.addEventListener("input",function(){var u=0,d='<ul class="search-result-list">',f=this.value.trim().toLowerCase().split(/[\s\-]+/);r.innerHTML="",1<this.value.trim().length&&t.forEach(function(e){var a=!1,r=e.title.trim().toLowerCase(),c=e.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),t=decodeURIComponent(e.url),s=-1,o=-1,n=-1;if(""!=r&&f.forEach(function(e,t){s=r.indexOf(e),o=c.indexOf(e),(0<=s||0<=o)&&(a=!0,0==t&&(n=o))}),a){u+=1,d+="<li><a href='"+t+"' class='search-result-title'>"+r+"</a>";var i=e.content.trim().replace(/<[^>]+>/g,"");if(0<=n){var l=n-20,p=n+80;l<0&&(l=0),0==l&&(p=50),p>i.length&&(p=i.length);var h=i.substring(l,p);f.forEach(function(e){var t=new RegExp(e,"gi");h=h.replace(t,'<b class="search-keyword">'+e+"</b>")}),d+='<p class="search-result">'+h+"...</p>"}d+="</li>"}}),d+="</ul>",0==u&&(d='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==f&&(d='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),r.innerHTML=d}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script><script type="text/javascript" src="/public/js/src/clipboard.min.js"></script><script type="text/javascript" src="/public/js/src/clipboard-use.js"></script></body></html>